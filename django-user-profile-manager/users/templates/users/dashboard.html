{% extends 'base.html' %}
{% load static %}

{% block title %}Dashboard - Profile Manager{% endblock %}

{% block content %}
<div class="dashboard-container">
    <!-- Profile Header -->
    <div class="profile-header">
        <div class="profile-image-wrapper">
            {% if profile.profile_picture %}
                <img src="{{ profile.profile_picture.url }}" alt="Profile" class="profile-pic-large">
            {% else %}
                <div class="profile-pic-placeholder">
                    <i class="bi bi-person-circle"></i>
                </div>
            {% endif %}
        </div>
        <h1 class="profile-name">
            {% if profile.full_name %}
                {{ profile.full_name }}
            {% else %}
                {{ user.username }}
            {% endif %}
        </h1>
        <p class="profile-username">@{{ user.username }}</p>
        
        <!-- Profile Completion Progress -->
        <div class="progress-container">
            <div class="progress-label">
                <span>Profile Completion</span>
                <span><strong>{{ completion_percentage }}%</strong></span>
            </div>
            <div class="progress">
                <div class="progress-bar" role="progressbar" style="width: {{ completion_percentage }}%;" 
                     aria-valuenow="{{ completion_percentage }}" aria-valuemin="0" aria-valuemax="100">
                </div>
            </div>
        </div>
    </div>

    <!-- Section Cards -->
    <div class="container">
        <div class="row">
            <!-- Personal Information -->
            <div class="col-md-6 mb-4">
                <div class="section-card">
                    <div class="section-icon">
                        <i class="bi bi-person-fill"></i>
                    </div>
                    <h3 class="section-title">Personal Information</h3>
                    <p class="section-description">Manage your personal details, contact information, and profile picture</p>
                    <div class="section-status {% if profile.full_name and profile.father_name and profile.phone %}status-complete{% else %}status-incomplete{% endif %}">
                        <i class="bi {% if profile.full_name and profile.father_name and profile.phone %}bi-check-circle-fill{% else %}bi-exclamation-circle-fill{% endif %}"></i>
                        <span>{% if profile.full_name and profile.father_name and profile.phone %}Completed{% else %}Incomplete{% endif %}</span>
                    </div>
                    <div class="section-actions">
                        <a href="{% url 'personal_info' %}" class="btn-section btn-primary-section">
                            <i class="bi bi-pencil"></i> Edit Info
                        </a>
                    </div>
                </div>
            </div>

            <!-- Education -->
            <div class="col-md-6 mb-4">
                <div class="section-card">
                    <div class="section-icon">
                        <i class="bi bi-mortarboard-fill"></i>
                    </div>
                    <h3 class="section-title">Education</h3>
                    <p class="section-description">Add your educational qualifications, degrees, and academic achievements</p>
                    <div class="section-status {% if education_count > 0 %}status-complete{% else %}status-incomplete{% endif %}">
                        <i class="bi {% if education_count > 0 %}bi-check-circle-fill{% else %}bi-exclamation-circle-fill{% endif %}"></i>
                        <span>{{ education_count }} {% if education_count == 1 %}entry{% else %}entries{% endif %}</span>
                    </div>
                    <div class="section-actions">
                        <a href="{% url 'education_list' %}" class="btn-section btn-primary-section">
                            <i class="bi bi-eye"></i> View All
                        </a>
                        <a href="{% url 'education_add' %}" class="btn-section btn-secondary-section">
                            <i class="bi bi-plus-lg"></i> Add New
                        </a>
                    </div>
                </div>
            </div>

            <!-- Skills & Certifications -->
            <div class="col-md-6 mb-4">
                <div class="section-card">
                    <div class="section-icon">
                        <i class="bi bi-award-fill"></i>
                    </div>
                    <h3 class="section-title">Skills & Certifications</h3>
                    <p class="section-description">Showcase your technical skills, expertise levels, and professional certifications</p>
                    <div class="section-status {% if skills_count > 0 %}status-complete{% else %}status-incomplete{% endif %}">
                        <i class="bi {% if skills_count > 0 %}bi-check-circle-fill{% else %}bi-exclamation-circle-fill{% endif %}"></i>
                        <span>{{ skills_count }} {% if skills_count == 1 %}skill{% else %}skills{% endif %}</span>
                    </div>
                    <div class="section-actions">
                        <a href="{% url 'skills_list' %}" class="btn-section btn-primary-section">
                            <i class="bi bi-eye"></i> View All
                        </a>
                        <a href="{% url 'skill_add' %}" class="btn-section btn-secondary-section">
                            <i class="bi bi-plus-lg"></i> Add New
                        </a>
                    </div>
                </div>
            </div>

            <!-- Experience -->
            <div class="col-md-6 mb-4">
                <div class="section-card">
                    <div class="section-icon">
                        <i class="bi bi-briefcase-fill"></i>
                    </div>
                    <h3 class="section-title">Work Experience</h3>
                    <p class="section-description">Document your professional journey, roles, and career achievements</p>
                    <div class="section-status {% if experience_count > 0 %}status-complete{% else %}status-incomplete{% endif %}">
                        <i class="bi {% if experience_count > 0 %}bi-check-circle-fill{% else %}bi-exclamation-circle-fill{% endif %}"></i>
                        <span>{{ experience_count }} {% if experience_count == 1 %}position{% else %}positions{% endif %}</span>
                    </div>
                    <div class="section-actions">
                        <a href="{% url 'experience_list' %}" class="btn-section btn-primary-section">
                            <i class="bi bi-eye"></i> View All
                        </a>
                        <a href="{% url 'experience_add' %}" class="btn-section btn-secondary-section">
                            <i class="bi bi-plus-lg"></i> Add New
                        </a>
                    </div>
                </div>
            </div>

            <!-- Portfolio & Projects -->
            <div class="col-md-12 mb-4">
                <div class="section-card">
                    <div class="section-icon">
                        <i class="bi bi-folder-fill"></i>
                    </div>
                    <h3 class="section-title">Portfolio & Projects</h3>
                    <p class="section-description">Display your best work, projects, and development portfolio with live demos</p>
                    <div class="section-status {% if projects_count > 0 %}status-complete{% else %}status-incomplete{% endif %}">
                        <i class="bi {% if projects_count > 0 %}bi-check-circle-fill{% else %}bi-exclamation-circle-fill{% endif %}"></i>
                        <span>{{ projects_count }} {% if projects_count == 1 %}project{% else %}projects{% endif %}</span>
                    </div>
                    <div class="section-actions">
                        <a href="{% url 'projects_list' %}" class="btn-section btn-primary-section">
                            <i class="bi bi-eye"></i> View All
                        </a>
                        <a href="{% url 'project_add' %}" class="btn-section btn-secondary-section">
                            <i class="bi bi-plus-lg"></i> Add New
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
